<section class="alerts-page"><div class="container">
  <div class="alerts-shell">
    <div class="alerts-hero">
      <div class="alerts-head">
        <div>
          <h2>Alerts</h2>
          <p class="muted">Payments, maintenance, applications, and account updates in one readable feed.</p>
        </div>
        <div class="alerts-head-actions">
          <a class="ghost-btn" href="/notifications/preferences">Preferences</a>
          <a class="ghost-btn" href="/onboarding">Onboarding</a>
          <form method="POST" action="/notifications/readall" class="alerts-readall-form">
            <button class="primary-btn" type="submit">Mark All Read</button>
          </form>
        </div>
      </div>
    </div>

    {{message_box}}

    <div class="alerts-toolbar">
      <div class="alerts-summary">
        <div class="alerts-stat">
          <div class="alerts-stat-label">Total Alerts</div>
          <div class="alerts-stat-value">{{total_count}}</div>
        </div>
        <div class="alerts-stat">
          <div class="alerts-stat-label">Unread At Load</div>
          <div class="alerts-stat-value">{{unread_count}}</div>
        </div>
        <div class="alerts-stat">
          <div class="alerts-stat-label">Actionable</div>
          <div class="alerts-stat-value">{{linked_count}}</div>
        </div>
        <div class="alerts-stat">
          <div class="alerts-stat-label">Today</div>
          <div class="alerts-stat-value">{{today_count}}</div>
        </div>
      </div>

      <div class="alerts-filter-row" role="tablist" aria-label="Alert filters">
        <button class="alerts-filter-btn is-active" type="button" data-alert-filter="all" aria-pressed="true">All<span class="alerts-filter-count">{{total_count}}</span></button>
        <button class="alerts-filter-btn" type="button" data-alert-filter="unread" aria-pressed="false">Unread<span class="alerts-filter-count">{{unread_count}}</span></button>
        <button class="alerts-filter-btn" type="button" data-alert-filter="linked" aria-pressed="false">Actionable<span class="alerts-filter-count">{{linked_count}}</span></button>
      </div>
    </div>

    <div class="alerts-feed-head">
      <h3>Recent Alerts</h3>
      <p class="muted">Newest items first. Use filters to focus quickly.</p>
    </div>

    <div class="alerts-list" id="alertsList">
      {{notifications_html}}
    </div>
    <div class="alerts-empty-filtered" id="alertsFilteredEmpty" style="display:none;">No alerts for this filter.</div>
  </div>
</div></section>
<script>
(function(){
  var list = document.getElementById('alertsList');
  if(!list) return;
  var cards = Array.prototype.slice.call(list.querySelectorAll('.alert-item'));
  var empty = document.getElementById('alertsFilteredEmpty');
  var buttons = Array.prototype.slice.call(document.querySelectorAll('[data-alert-filter]'));

  function setActive(mode){
    buttons.forEach(function(btn){
      var on = btn.getAttribute('data-alert-filter') === mode;
      btn.classList.toggle('is-active', on);
      btn.setAttribute('aria-pressed', on ? 'true' : 'false');
    });
  }

  function applyFilter(mode){
    var visible = 0;
    cards.forEach(function(card){
      var show = true;
      if(mode === 'unread') show = card.getAttribute('data-read') === '0';
      if(mode === 'linked') show = card.getAttribute('data-has-link') === '1';
      card.style.display = show ? '' : 'none';
      if(show) visible += 1;
    });
    if(empty){
      empty.style.display = (cards.length > 0 && visible === 0) ? 'block' : 'none';
    }
    setActive(mode);
  }

  buttons.forEach(function(btn){
    btn.addEventListener('click', function(){
      applyFilter(btn.getAttribute('data-alert-filter') || 'all');
    });
  });

  applyFilter('all');
})();
</script>


