# ====================================================================
# Atlas Production Environment Configuration (Render-ready template)
# ====================================================================
# Do not commit real secrets. Set secret values in Render dashboard.
# ====================================================================

# ---- Core Application ----
HOST=0.0.0.0
PORT=10000
PROD_MODE=1
DEBUG=0
SECRET_KEY=REPLACE_IN_RENDER_DASHBOARD_SECRET_KEY
POSTGRES_REQUIRED=1

# ---- Security / Cookies / HTTPS ----
ENFORCE_HTTPS=1
FORCE_SECURE_COOKIES=1
COOKIE_SECURE=1
SESSION_COOKIE_SAMESITE=Strict
CSRF_COOKIE_SAMESITE=Strict
SECURITY_HEADERS_ENABLED=1
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=1
HSTS_PRELOAD=0
ALLOW_RESET_LINK_IN_RESPONSE_NONLOCAL=0
ALLOWED_HOSTS=.onrender.com,localhost,127.0.0.1
CSRF_TRUSTED_HOSTS=.onrender.com,localhost,127.0.0.1
PUBLIC_BASE_URL=

# ---- Database Configuration ----
# PostgreSQL is primary in production; keep SQLite path as fallback/maintenance only.
POSTGRES_DSN=REPLACE_IN_RENDER_DASHBOARD_POSTGRES_DSN
POSTGRES_HOST=
POSTGRES_PORT=
POSTGRES_DB=
POSTGRES_USER=
POSTGRES_PASSWORD=
DATABASE_PATH=/var/data/atlas.sqlite

# ---- Storage / Logs / Backups (Render disk mount) ----
STORAGE_ROOT=/var/data/storage
UPLOAD_DIR=/var/data/uploads
LOG_DIR=/var/data/logs
LOG_FILE=/var/data/logs/atlas.log
BACKUP_DIR=/var/data/backups
LOG_LEVEL=INFO
LOG_JSON=1
LOG_MAX_BYTES=20971520
LOG_BACKUP_COUNT=10
BACKUP_RETENTION_COUNT=14
BACKUP_RETENTION_DAYS=30
BACKUP_GZIP=1

# ---- Redis Configuration ----
REDIS_SESSIONS_ENABLED=1
REDIS_URL=REPLACE_IN_RENDER_DASHBOARD_REDIS_URL
REDIS_PASSWORD=
REDIS_SESSION_PREFIX=atlas:session:
REDIS_SESSION_USER_PREFIX=atlas:session_uid:
REDIS_RATE_LIMIT_PREFIX=atlas:ratelimit:

# ---- Bootstrap Admin (first run only) ----
BOOTSTRAP_ADMIN_FULL_NAME=Atlas Administrator
BOOTSTRAP_ADMIN_PHONE=REPLACE_ADMIN_PHONE
BOOTSTRAP_ADMIN_EMAIL=REPLACE_ADMIN_EMAIL
BOOTSTRAP_ADMIN_USERNAME=REPLACE_ADMIN_USERNAME
BOOTSTRAP_ADMIN_PASSWORD=REPLACE_ADMIN_PASSWORD
SEED_DEMO_DATA=0

# ---- SMTP / Alerts (optional) ----
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@atlas.example.com
SMTP_USE_TLS=1
ERROR_ALERT_EMAIL_TO=
ERROR_ALERT_COOLDOWN_SECONDS=900

# ---- Runtime Behavior ----
CLEAR_SESSIONS_ON_START=0
HOUSEKEEPING_INTERVAL_SECONDS=3600
PASSWORD_RESET_RETENTION_DAYS=30
SESSION_TIMEOUT_MINUTES=30
MAX_LOGIN_ATTEMPTS=5
LOGIN_ATTEMPT_TIMEOUT_MINUTES=15
PROMOTE_CMD=
